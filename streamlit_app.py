# streamlit_app.py
import streamlit as st

st.set_page_config(page_title="소득세 계산기", layout="centered")

st.title("💰 소득세 계산기 (2024)")

st.caption("※ 학습용 예시입니다. 근로소득공제/세액공제 등은 단순화했습니다.")

income = st.number_input("연 소득을 입력하세요 (원)", min_value=0, step=1_000_000, format="%d")

def calc_tax_2024(inc: int):
    # 2024 과세표준 누진세율 (단순화, 공제 미반영)
    # 0~12M:6%, 12~46M:15%, 46~88M:24%, 88~150M:35%, 150~300M:38%, 300~500M:40%, 500M~:42%
    if inc <= 12_000_000:
        tax = inc * 0.06
        level = "저소득층"
    elif inc <= 46_000_000:
        tax = 12_000_000 * 0.06 + (inc - 12_000_000) * 0.15
        level = "중간소득층"
    elif inc <= 88_000_000:
        tax = (12_000_000 * 0.06
               + (46_000_000 - 12_000_000) * 0.15
               + (inc - 46_000_000) * 0.24)
        level = "고소득층"
    elif inc <= 150_000_000:
        tax = (12_000_000 * 0.06
               + (46_000_000 - 12_000_000) * 0.15
               + (88_000_000 - 46_000_000) * 0.24
               + (inc - 88_000_000) * 0.35)
        level = "상위소득층"
    elif inc <= 300_000_000:
        tax = (12_000_000 * 0.06
               + (46_000_000 - 12_000_000) * 0.15
               + (88_000_000 - 46_000_000) * 0.24
               + (150_000_000 - 88_000_000) * 0.35
               + (inc - 150_000_000) * 0.38)
        level = "고소득층"
    elif inc <= 500_000_000:
        tax = (12_000_000 * 0.06
               + (46_000_000 - 12_000_000) * 0.15
               + (88_000_000 - 46_000_000) * 0.24
               + (150_000_000 - 88_000_000) * 0.35
               + (300_000_000 - 150_000_000) * 0.38
               + (inc - 300_000_000) * 0.40)
        level = "초고소득층"
    else:
        tax = (12_000_000 * 0.06
               + (46_000_000 - 12_000_000) * 0.15
               + (88_000_000 - 46_000_000) * 0.24
               + (150_000_000 - 88_000_000) * 0.35
               + (300_000_000 - 150_000_000) * 0.38
               + (500_000_000 - 300_000_000) * 0.40
               + (inc - 500_000_000) * 0.42)
        level = "최고소득층"
    return round(tax), level

if st.button("세금 계산하기"):
    tax, level = calc_tax_2024(int(income))
    st.success(f"소득: {income:,.0f}원\n\n소득 수준: {level}\n\n예상 세금: {tax:,.0f}원")

with st.expander("📘 세율표 보기"):
    st.write("""
- 0 ~ 12,000,000원: **6%**
- 12,000,000 ~ 46,000,000원: **15%**
- 46,000,000 ~ 88,000,000원: **24%**
- 88,000,000 ~ 150,000,000원: **35%**
- 150,000,000 ~ 300,000,000원: **38%**
- 300,000,000 ~ 500,000,000원: **40%**
- 500,000,000원 초과: **42%**
""")
